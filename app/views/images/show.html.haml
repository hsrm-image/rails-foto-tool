= javascript_pack_tag 'rating', 'image', 'data-turbolinks-track': 'reload'
%p#notice= notice

%p
  %b Title:
  = @image.title


= link_to @image.previous do
  .pagination#paginationL
    \<
= link_to @image.next do
  .pagination#paginationR
    \>

#main-image
  = image_tag @image.image_file
%p
  %b Owner:
  = link_to @image.owner.name, @image.owner

= render 'ratings/interface'
= render 'ratings/score', locals: {rateable: @image}

#description
  #description-preview
    #preview-text
      = @image.description
    = link_to "Read more", '', id: "extend-description"
  #description-full{style: "display: none;"}
    = simple_format(@image.description)
    %hr
    #description-exif
      = render 'exif'
    = link_to "Read less", '', id: "truncate-description"

%hr

= link_to 'Edit', edit_image_path(@image)
\|
= link_to 'Back', images_path
\|
= link_to 'Delete', @image, method: :delete, data: { confirm: 'Are you sure?' }

#comments
  %h3 New Comment
  = render 'comments/form'
  %h2#comment-count
    =@image.comments.count
    Comments
  // The last comment is empty because it gets created by 'render'
  #comments-list
    = render @image.comments[0...-1].reverse



