= javascript_pack_tag 'rating', 'image', 'data-turbolinks-track': 'reload'
- unless @image.processed
  %span#processing{style: "display: none;"} This image is not yet publicly visible because it is still processing.
%p#notice= notice

%p
  %b Title:
  = @image.title


= link_to @image.previous do
  .pagination#paginationL
    \<
= link_to @image.next do
  .pagination#paginationR
    \>

#main-image
  -if @image.image_file.attached?
    = image_tag @image.image_file
%p
  %b Owner:
  = link_to @image.owner.name, @image.owner

= render 'ratings/interface'
= render 'ratings/score', locals: {rateable: @image}

= render 'description'

%hr

= link_to 'Edit', edit_image_path(@image)
\|
= link_to 'Back', images_path
\|
= link_to 'Delete', @image, method: :delete, data: { confirm: 'Are you sure?' }

#comments
  %h3 New Comment
  = render 'comments/form'
  %h2#comment-count
    =@image.comments.count
    Comments
  // The last comment is empty because it gets created by 'render'
  #comments-list
    = render @image.comments[0...-1].reverse



