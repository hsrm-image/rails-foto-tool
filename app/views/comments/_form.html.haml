= javascript_pack_tag 'comment', 'data-turbolinks-track': 'reload'
= form_with model: [@image, @comment], :html => { :id => "new-comment-form", :multipart => true, "data-remote": true }, remote: true, format: :js do |f|
  - if @comment.errors.any?
    #error_explanation
      %h2= "#{pluralize(@comment.errors.count, "error")} prohibited this comment from being saved:"
      %ul
        - @comment.errors.full_messages.each do |message|
          %li= message
  .field
    = f.label :username
    - if user_signed_in?
      // Autofill username if User is logged in
      = f.text_field :username, value: current_user[:name], readonly: true
    - else
      = f.text_field :username 
  .field
    = f.label :text
    = f.text_area :text
  .actions
    = f.submit 'Save', :onclick => "Rails.fire(form, 'submit')"
